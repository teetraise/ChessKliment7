<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ôüÔ∏è –û–Ω–ª–∞–π–Ω —à–∞—Ö–º–∞—Ç—ã - Debug</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .chess-board {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            grid-template-rows: repeat(8, 60px);
            border: 3px solid #8B4513;
            border-radius: 8px;
            margin: 20px auto;
            width: fit-content;
        }

        .chess-square {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            cursor: pointer;
            user-select: none;
        }

        .chess-square.white {
            background-color: #f0d9b5;
        }

        .chess-square.black {
            background-color: #b58863;
        }

        .chess-square:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .debug-info {
            margin-top: 20px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
            font-family: monospace;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #5a6fd8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ôüÔ∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —à–∞—Ö–º–∞—Ç–Ω–æ–π –¥–æ—Å–∫–∏</h1>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ—Å–∫–∏</p>
        </div>

        <div style="text-align: center;">
            <button onclick="createBoard()">üéØ –°–æ–∑–¥–∞—Ç—å –¥–æ—Å–∫—É</button>
            <button onclick="setupPieces()">‚ôüÔ∏è –†–∞—Å—Å—Ç–∞–≤–∏—Ç—å —Ñ–∏–≥—É—Ä—ã</button>
            <button onclick="showDebugInfo()">üîç –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–ª–∞–¥–∫—É</button>
        </div>

        <div class="chess-board" id="chessBoard">
            <!-- –ü–æ–ª—è –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <div class="debug-info" id="debugInfo">
            <strong>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong><br>
            –°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ—Å–∫–∏...
        </div>
    </div>

    <script>
        console.log('üéÆ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞...');

        // –ù–∞—á–∞–ª—å–Ω–∞—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–≥—É—Ä
        const INITIAL_BOARD = {
            'a8': '‚ôú', 'b8': '‚ôû', 'c8': '‚ôù', 'd8': '‚ôõ', 'e8': '‚ôö', 'f8': '‚ôù', 'g8': '‚ôû', 'h8': '‚ôú',
            'a7': '‚ôü', 'b7': '‚ôü', 'c7': '‚ôü', 'd7': '‚ôü', 'e7': '‚ôü', 'f7': '‚ôü', 'g7': '‚ôü', 'h7': '‚ôü',
            'a2': '‚ôô', 'b2': '‚ôô', 'c2': '‚ôô', 'd2': '‚ôô', 'e2': '‚ôô', 'f2': '‚ôô', 'g2': '‚ôô', 'h2': '‚ôô',
            'a1': '‚ôñ', 'b1': '‚ôò', 'c1': '‚ôó', 'd1': '‚ôï', 'e1': '‚ôî', 'f1': '‚ôó', 'g1': '‚ôò', 'h1': '‚ôñ'
        };

        let gameBoard = {};

        function createBoard() {
            console.log('üìã –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Å–∫–∏...');
            
            const board = document.getElementById('chessBoard');
            board.innerHTML = '';

            for (let row = 8; row >= 1; row--) {
                for (let col = 0; col < 8; col++) {
                    const square = document.createElement('div');
                    const file = String.fromCharCode(97 + col); // a-h
                    const squareId = file + row;
                    
                    square.className = `chess-square ${(row + col) % 2 === 0 ? 'black' : 'white'}`;
                    square.id = squareId;
                    square.onclick = () => handleSquareClick(squareId);
                    
                    board.appendChild(square);
                }
            }

            updateDebugInfo('‚úÖ –î–æ—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞! 64 –ø–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã.');
            console.log('‚úÖ –î–æ—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞');
        }

        function setupPieces() {
            console.log('‚ôüÔ∏è –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–≥—É—Ä...');
            
            // –û—á–∏—â–∞–µ–º –¥–æ—Å–∫—É
            document.querySelectorAll('.chess-square').forEach(square => {
                square.textContent = '';
            });

            // –†–∞—Å—Å—Ç–∞–≤–ª—è–µ–º —Ñ–∏–≥—É—Ä—ã
            for (const [square, piece] of Object.entries(INITIAL_BOARD)) {
                const element = document.getElementById(square);
                if (element) {
                    element.textContent = piece;
                    console.log(`–ü–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ñ–∏–≥—É—Ä–∞ ${piece} –Ω–∞ ${square}`);
                } else {
                    console.error(`–ü–æ–ª–µ ${square} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!`);
                }
            }

            gameBoard = { ...INITIAL_BOARD };
            updateDebugInfo('‚úÖ –§–∏–≥—É—Ä—ã —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã! 32 —Ñ–∏–≥—É—Ä—ã –Ω–∞ –¥–æ—Å–∫–µ.');
            console.log('‚úÖ –§–∏–≥—É—Ä—ã —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã');
        }

        function handleSquareClick(squareId) {
            console.log(`üñ±Ô∏è –ö–ª–∏–∫ –ø–æ –ø–æ–ª—é: ${squareId}`);
            
            const square = document.getElementById(squareId);
            const piece = square.textContent;
            
            if (piece) {
                alert(`–í—ã–±—Ä–∞–Ω–∞ —Ñ–∏–≥—É—Ä–∞: ${piece} –Ω–∞ –ø–æ–ª–µ ${squareId}`);
            } else {
                alert(`–ü—É—Å—Ç–æ–µ –ø–æ–ª–µ: ${squareId}`);
            }
        }

        function showDebugInfo() {
            const totalSquares = document.querySelectorAll('.chess-square').length;
            const occupiedSquares = document.querySelectorAll('.chess-square:not(:empty)').length;
            
            const info = `
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å–∫–∏:
‚Ä¢ –í—Å–µ–≥–æ –ø–æ–ª–µ–π: ${totalSquares}
‚Ä¢ –ó–∞–Ω—è—Ç–æ –ø–æ–ª–µ–π: ${occupiedSquares}
‚Ä¢ –†–∞–∑–º–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è: ${Object.keys(gameBoard).length}
‚Ä¢ –í—Ä–µ–º—è: ${new Date().toLocaleTimeString()}
‚Ä¢ User Agent: ${navigator.userAgent}
            `;
            
            updateDebugInfo(info);
            console.log('üìä –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:', {
                totalSquares,
                occupiedSquares,
                gameBoard,
                initialBoard: INITIAL_BOARD
            });
        }

        function updateDebugInfo(message) {
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.innerHTML = `<strong>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong><br>${message.replace(/\n/g, '<br>')}`;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Å–∫–∏...');
            
            setTimeout(() => {
                createBoard();
                setTimeout(() => {
                    setupPieces();
                    updateDebugInfo('üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n–î–æ—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ —Ñ–∏–≥—É—Ä—ã —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã.');
                }, 500);
            }, 100);
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        console.log('‚úÖ –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
        updateDebugInfo('üîÑ –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ DOM...');
    </script>
</body>
</html>